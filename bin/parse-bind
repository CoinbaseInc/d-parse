#!/usr/bin/env ruby

require 'd-parse'
require 'd-parse/dsl'

digit = chars(*('0'..'9')).capture
letter = chars(*('a'..'z')).capture

init = (char('d') | char('l')).capture

pair =
  init.bind do |data|
    new_parser =
      case data
      when 'd'
        digit
      when 'l'
        letter
      else
        raise '???'
      end

    new_parser.map { |d| [data, d] }
  end

parser = pair.repeat

main(parser)
